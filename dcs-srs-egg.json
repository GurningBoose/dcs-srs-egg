{
  "_comment": "DCS SimpleRadio Standalone (SRS) — Pterodactyl egg for jaycadi/dcs-srs-server; relocates /opt/srs to /home/container/opt-srs so cfg/logs are writable & visible",
  "meta": { "version": "PTDL_v2", "update_url": null },
  "exported_at": "2025-09-25T00:00:00Z",
  "name": "DCS SimpleRadio Standalone (SRS) – jaycadi/dcs-srs-server (relocated to /home/container)",
  "author": "gurningboose@gmail.com",
  "description": "Runs the DCS SimpleRadio Standalone server using jaycadi/dcs-srs-server. On boot, copies /opt/srs to /home/container/opt-srs and patches the entrypoint so cfg/logs live under /home/container and appear in the File Manager.",
  "features": null,
  "docker_images": {
    "jaycadi/dcs-srs-server:2.3.0.3": "jaycadi/dcs-srs-server:2.3.0.3"
  },
  "file_denylist": [],
  "startup": "/bin/sh -lc 'set -eu; SRC=/opt/srs; DST=/home/container/opt-srs; if [ ! -f \"$DST/.copied\" ]; then rm -rf \"$DST\" && mkdir -p \"$DST\"; cp -a \"$SRC/.\" \"$DST/\"; if [ -f \"$DST/entrypoint.sh\" ]; then sed -i \"s#$SRC#$DST#g\" \"$DST/entrypoint.sh\" || true; fi; touch \"$DST/.copied\"; fi; mkdir -p \"$DST/cfg\" \"$DST/logs\"; exec \"$DST/entrypoint.sh\"'",
  "config": { "files": "{}", "startup": "{}", "logs": "{}", "stop": "stop" },
  "scripts": {
    "installation": {
      "script": "#!/bin/sh\r\nset -eu\r\nmkdir -p /mnt/server/cfg /mnt/server/logs\r\necho \"SRS will run from /home/container/opt-srs after relocation on first start.\" > /mnt/server/README-SRS.txt\r\necho \"Done.\"\r\n",
      "container": "alpine:3.19",
      "entrypoint": "sh"
    }
  },
  "variables": [
    {
      "name": "Time Zone",
      "description": "TZ for the container (e.g., Etc/UTC, America/Los_Angeles).",
      "env_variable": "TZ",
      "default_value": "America/Los_Angeles",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:64",
      "field_type": "text"
    },

    { "name": "Server IP Bind", "description": "IP address to bind. Use 0.0.0.0 to listen on all interfaces.", "env_variable": "SRS_BIND_IP", "default_value": "0.0.0.0", "user_viewable": true, "user_editable": true, "rules": "required|string", "field_type": "text" },
    { "name": "SRS Voice/Data Port", "description": "Primary SRS port (TCP+UDP). Set your server's Primary Allocation to this.", "env_variable": "SRS_PORT", "default_value": "{{server.build.default.port}}", "user_viewable": true, "user_editable": true, "rules": "required|integer|between:1,65535", "field_type": "text" },
    { "name": "Enable UPnP", "description": "Attempt to auto-open port forwarding if the router supports UPnP.", "env_variable": "UPNP_ENABLED", "default_value": "false", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },

    { "name": "Enable HTTP REST API", "description": "Start the HTTP management server (requires an additional TCP port allocation).", "env_variable": "HTTP_SERVER_ENABLED", "default_value": "false", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "HTTP REST API Port", "description": "TCP port for the HTTP management server (only used if enabled). Assign as an Additional Allocation.", "env_variable": "HTTP_SERVER_PORT", "default_value": "8080", "user_viewable": true, "user_editable": true, "rules": "required|integer|between:1,65535", "field_type": "text" },

    { "name": "Transmission Log Enabled", "description": "Record radio transmissions to log files.", "env_variable": "TRANSMISSION_LOG_ENABLED", "default_value": "true", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "Transmission Log Retention (days)", "description": "Days to keep transmission logs before cleanup.", "env_variable": "TRANSMISSION_LOG_RETENTION", "default_value": "2", "user_viewable": true, "user_editable": true, "rules": "required|integer|min:0", "field_type": "text" },

    { "name": "Export Client List", "description": "Write a JSON file with connected clients (useful for overlays/automation).", "env_variable": "CLIENT_EXPORT_ENABLED", "default_value": "true", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    {
      "name": "Client Export File Path",
      "description": "Where to write the clients list JSON file.",
      "env_variable": "CLIENT_EXPORT_FILE_PATH",
      "default_value": "/home/container/opt-srs/logs/clients-list.json",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string",
      "field_type": "text"
    },

    { "name": "Server Presets Enabled", "env_variable": "SERVER_PRESETS_ENABLED", "description": "Push server-side channel presets to clients (requires preset files).", "default_value": "true", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "LOS (Line-of-Sight) Enabled", "env_variable": "LOS_ENABLED", "description": "Limit radio range by terrain line-of-sight.", "default_value": "false", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "Distance-Based Range Enabled", "env_variable": "DISTANCE_ENABLED", "description": "Limit radio range by distance only.", "default_value": "false", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "IRL TX Effects", "env_variable": "IRL_RADIO_TX", "description": "Apply realistic transmission effects to outgoing audio.", "default_value": "false", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "IRL RX Interference", "env_variable": "IRL_RADIO_RX_INTERFERENCE", "description": "Apply realistic interference to received audio.", "default_value": "false", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "Radio Expansion", "env_variable": "RADIO_EXPANSION", "description": "Allow more than 10 presets per aircraft.", "default_value": "true", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "Allow Radio Encryption", "env_variable": "ALLOW_RADIO_ENCRYPTION", "description": "Permit encrypted comms; does not force them.", "default_value": "true", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "Force Encryption", "env_variable": "STRICT_RADIO_ENCRYPTION", "description": "Require encryption for all radios.", "default_value": "false", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "Show Tuned Count", "env_variable": "SHOW_TUNED_COUNT", "description": "Display number of users tuned to each frequency.", "default_value": "true", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "Show Transmitter Name", "env_variable": "SHOW_TRANSMITTER_NAME", "description": "Display the name of the transmitting user.", "default_value": "true", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },

    { "name": "Coalition Audio Security", "env_variable": "COALITION_AUDIO_SECURITY", "description": "Prevent opposing coalitions from hearing each other.", "default_value": "false", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "Disable Spectator Audio", "env_variable": "SPECTATORS_AUDIO_DISABLED", "description": "Stop spectators from hearing radio comms.", "default_value": "false", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },

    { "name": "External AWACS Mode", "env_variable": "EXTERNAL_AWACS_MODE", "description": "Enable server-side radio management (External AWACS).", "default_value": "true", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" },
    { "name": "External AWACS Password (BLUE)", "env_variable": "EXTERNAL_AWACS_MODE_BLUE_PASSWORD", "description": "Password for BLUE team control.", "default_value": "blue", "user_viewable": true, "user_editable": true, "rules": "required|string|max:64", "field_type": "text" },
    { "name": "External AWACS Password (RED)", "env_variable": "EXTERNAL_AWACS_MODE_RED_PASSWORD", "description": "Password for RED team control.", "default_value": "red", "user_viewable": true, "user_editable": true, "rules": "required|string|max:64", "field_type": "text" },

    { "name": "Test Frequencies (MHz)", "description": "Comma-separated list (e.g., 247.2,120.3).", "env_variable": "TEST_FREQUENCIES", "default_value": "247.2,120.3", "user_viewable": true, "user_editable": true, "rules": "nullable|string", "field_type": "text" },
    { "name": "Lobby Frequencies (MHz)", "description": "Comma-separated list for lobby (pre-mission).", "env_variable": "GLOBAL_LOBBY_FREQUENCIES", "default_value": "248.22", "user_viewable": true, "user_editable": true, "rules": "nullable|string", "field_type": "text" },
    { "name": "Retransmission Node Limit", "description": "0 = unlimited.", "env_variable": "RETRANSMISSION_NODE_LIMIT", "default_value": "0", "user_viewable": true, "user_editable": true, "rules": "required|integer|min:0", "field_type": "text" },
    { "name": "Check for Beta Updates", "description": "Enable beta update checks.", "env_variable": "CHECK_FOR_BETA_UPDATES", "default_value": "false", "user_viewable": true, "user_editable": true, "rules": "required|in:true,false", "field_type": "boolean" }
  ]
}
